# Specify minimum CMake version
cmake_minimum_required(VERSION 2.8.3)

# Project name
project( OGSFileConverter )

# Source files
SET( SOURCES
	ConversionTools.cpp
	FileListDialog.cpp
	OGSFileConverter.cpp
)

# Moc Header files
SET( MOC_HEADERS
	ConversionTools.h
	FileListDialog.h
	OGSFileConverter.h
)

# Header files
SET( HEADERS

)

# UI files
SET( UIS
	FileList.ui
	OGSFileConverter.ui
)

# Find installed Qt4 libraries and headers
find_package( Qt4 REQUIRED )

# Run Qts user interface compiler uic on .ui files
QT4_WRAP_UI( UI_HEADERS ${UIS} )

# Run Qts meta object compiler moc on header files
QT4_WRAP_CPP( MOC_SOURCES ${MOC_HEADERS} )

# Include the headers which are generated by uic and moc
# and include additional header
INCLUDE_DIRECTORIES(
	${CMAKE_BINARY_DIR}/UTL/FileConverter/OGSFileConverter
	${CMAKE_SOURCE_DIR}/UTL/FileConverter/OGSFileConverter
	${CMAKE_SOURCE_DIR}/Base
	${CMAKE_SOURCE_DIR}/FEM
	${CMAKE_SOURCE_DIR}/FileIO
	${CMAKE_SOURCE_DIR}/GEO
	${CMAKE_SOURCE_DIR}/MathLib
	${CMAKE_SOURCE_DIR}/MSH
	${CMAKE_SOURCE_DIR}/Qt/Base
	${CMAKE_SOURCE_DIR}/Qt/DataView
	${CMAKE_SOURCE_DIR}/Qt/VtkVis
)

# Put moc files in a project folder
SOURCE_GROUP("UI Files" REGULAR_EXPRESSION "\\w*\\.ui")
SOURCE_GROUP("Moc Files" REGULAR_EXPRESSION "moc_.*")

# Create the library
ADD_EXECUTABLE( OGSFileConverter
	main.cpp
	${SOURCES}
	${HEADERS}
	${MOC_HEADERS}
	${MOC_SOURCES}
	${UIS}
)

TARGET_LINK_LIBRARIES( OGSFileConverter
	${QT_LIBRARIES}
	FileIO
	GEO
	FEM
	QtDataView
	VtkVis
	QVTK	
)

# Adds useful macros and variables
# this is needed to correctly link the qt and vtk libraries through target_link_libraries
INCLUDE( ${QT_USE_FILE} )
INCLUDE( ${VTK_USE_FILE} )

# Set build configuration types
# "RelWithDebInfo" and "MinSizeRelease" can be added here
set ( CMAKE_CONFIGURATION_TYPES "Release;Debug" CACHE TYPE INTERNAL FORCE )

# Set build directories
# Binaries are created in /bin and libraries in /lib
set( EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR}/bin )
set( LIBRARY_OUTPUT_PATH ${CMAKE_BINARY_DIR}/lib )

####################
### Installation ###
####################

IF(OGS_PACKAGING)
	INSTALL (TARGETS OGSFileConverter RUNTIME DESTINATION bin COMPONENT ogs)
ENDIF()
